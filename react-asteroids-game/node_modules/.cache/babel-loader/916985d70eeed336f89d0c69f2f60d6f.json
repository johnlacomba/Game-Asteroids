{"ast":null,"code":"import React, { useEffect, useRef } from 'react';\nimport { useGameLoop } from '../hooks/useGameLoop';\nimport { handleInput } from '../core/inputController';\nimport Bullet from './Bullet';\nexport default class Player {\n  constructor(args) {\n    this.position = args.position;\n    this.velocity = {\n      x: 0,\n      y: 0\n    };\n    this.rotation = 0;\n    this.rotationSpeed = 6;\n    this.speed = 0.15;\n    this.inertia = 0.99;\n    this.radius = 20; // Revert to 20 for drawing\n    this.shape = [{\n      x: 0,\n      y: -this.radius\n    }, {\n      x: this.radius / 2,\n      y: this.radius / 2\n    }, {\n      x: -this.radius / 2,\n      y: this.radius / 2\n    }];\n  }\n  getPolygon() {\n    const angle = this.rotation * Math.PI / 180;\n    return this.shape.map(point => {\n      const rotatedX = point.x * Math.cos(angle) - point.y * Math.sin(angle);\n      const rotatedY = point.x * Math.sin(angle) + point.y * Math.cos(angle);\n      return {\n        x: rotatedX + this.position.x,\n        y: rotatedY + this.position.y\n      };\n    });\n  }\n  destroy() {\n    this.delete = true;\n  }\n  shoot() {\n    const bulletPosition = {\n      x: this.position.x - Math.sin(-this.rotation * Math.PI / 180) * this.radius,\n      y: this.position.y - Math.cos(-this.rotation * Math.PI / 180) * this.radius\n    };\n    return new Bullet({\n      position: bulletPosition,\n      rotation: this.rotation\n    });\n  }\n  rotate(dir) {\n    if (dir === 'LEFT') {\n      this.rotation -= this.rotationSpeed;\n    }\n    if (dir === 'RIGHT') {\n      this.rotation += this.rotationSpeed;\n    }\n  }\n  accelerate() {\n    this.velocity.x -= Math.sin(-this.rotation * Math.PI / 180) * this.speed;\n    this.velocity.y -= Math.cos(-this.rotation * Math.PI / 180) * this.speed;\n  }\n  decelerate() {\n    this.velocity.x += Math.sin(-this.rotation * Math.PI / 180) * (this.speed / 2);\n    this.velocity.y += Math.cos(-this.rotation * Math.PI / 180) * (this.speed / 2);\n  }\n  update(keys, width, height) {\n    if (keys.a) {\n      this.rotate('LEFT');\n    }\n    if (keys.d) {\n      this.rotate('RIGHT');\n    }\n    if (keys.w) {\n      this.accelerate();\n    }\n    if (keys.s) {\n      this.decelerate();\n    }\n\n    // Apply inertia\n    this.velocity.x *= this.inertia;\n    this.velocity.y *= this.inertia;\n\n    // Update position\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n\n    // Screen wrap\n    if (this.position.x > width + this.radius) {\n      this.position.x = -this.radius;\n    } else if (this.position.x < -this.radius) {\n      this.position.x = width + this.radius;\n    }\n    if (this.position.y > height + this.radius) {\n      this.position.y = -this.radius;\n    } else if (this.position.y < -this.radius) {\n      this.position.y = height + this.radius;\n    }\n  }\n  draw(context) {\n    context.save();\n    context.translate(this.position.x, this.position.y);\n    context.rotate(this.rotation * Math.PI / 180);\n    context.strokeStyle = '#ffffff';\n    context.fillStyle = '#000000';\n    context.lineWidth = 2;\n    context.beginPath();\n    context.moveTo(0, -this.radius);\n    context.lineTo(this.radius / 2, this.radius / 2);\n    context.lineTo(-this.radius / 2, this.radius / 2);\n    context.closePath();\n    context.fill();\n    context.stroke();\n    context.restore();\n  }\n}","map":{"version":3,"names":["React","useEffect","useRef","useGameLoop","handleInput","Bullet","Player","constructor","args","position","velocity","x","y","rotation","rotationSpeed","speed","inertia","radius","shape","getPolygon","angle","Math","PI","map","point","rotatedX","cos","sin","rotatedY","destroy","delete","shoot","bulletPosition","rotate","dir","accelerate","decelerate","update","keys","width","height","a","d","w","s","draw","context","save","translate","strokeStyle","fillStyle","lineWidth","beginPath","moveTo","lineTo","closePath","fill","stroke","restore"],"sources":["/Users/jlacomba/Game-Asteroids/react-asteroids-game/src/components/Player.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { useGameLoop } from '../hooks/useGameLoop';\nimport { handleInput } from '../core/inputController';\nimport Bullet from './Bullet';\n\nexport default class Player {\n  constructor(args) {\n    this.position = args.position;\n    this.velocity = { x: 0, y: 0 };\n    this.rotation = 0;\n    this.rotationSpeed = 6;\n    this.speed = 0.15;\n    this.inertia = 0.99;\n    this.radius = 20; // Revert to 20 for drawing\n    this.shape = [\n      { x: 0, y: -this.radius },\n      { x: this.radius / 2, y: this.radius / 2 },\n      { x: -this.radius / 2, y: this.radius / 2 },\n    ];\n  }\n\n  getPolygon() {\n    const angle = this.rotation * Math.PI / 180;\n    return this.shape.map(point => {\n      const rotatedX = point.x * Math.cos(angle) - point.y * Math.sin(angle);\n      const rotatedY = point.x * Math.sin(angle) + point.y * Math.cos(angle);\n      return {\n        x: rotatedX + this.position.x,\n        y: rotatedY + this.position.y,\n      };\n    });\n  }\n\n  destroy() {\n    this.delete = true;\n  }\n\n  shoot() {\n    const bulletPosition = {\n      x: this.position.x - Math.sin(-this.rotation * Math.PI / 180) * this.radius,\n      y: this.position.y - Math.cos(-this.rotation * Math.PI / 180) * this.radius,\n    };\n    return new Bullet({ position: bulletPosition, rotation: this.rotation });\n  }\n\n  rotate(dir) {\n    if (dir === 'LEFT') {\n      this.rotation -= this.rotationSpeed;\n    }\n    if (dir === 'RIGHT') {\n      this.rotation += this.rotationSpeed;\n    }\n  }\n\n  accelerate() {\n    this.velocity.x -= Math.sin(-this.rotation * Math.PI / 180) * this.speed;\n    this.velocity.y -= Math.cos(-this.rotation * Math.PI / 180) * this.speed;\n  }\n\n  decelerate() {\n    this.velocity.x += Math.sin(-this.rotation * Math.PI / 180) * (this.speed / 2);\n    this.velocity.y += Math.cos(-this.rotation * Math.PI / 180) * (this.speed / 2);\n  }\n\n  update(keys, width, height) {\n    if (keys.a) {\n      this.rotate('LEFT');\n    }\n    if (keys.d) {\n      this.rotate('RIGHT');\n    }\n    if (keys.w) {\n      this.accelerate();\n    }\n    if (keys.s) {\n      this.decelerate();\n    }\n\n    // Apply inertia\n    this.velocity.x *= this.inertia;\n    this.velocity.y *= this.inertia;\n\n    // Update position\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n\n    // Screen wrap\n    if (this.position.x > width + this.radius) {\n      this.position.x = -this.radius;\n    } else if (this.position.x < -this.radius) {\n      this.position.x = width + this.radius;\n    }\n    if (this.position.y > height + this.radius) {\n      this.position.y = -this.radius;\n    } else if (this.position.y < -this.radius) {\n      this.position.y = height + this.radius;\n    }\n  }\n\n  draw(context) {\n    context.save();\n    context.translate(this.position.x, this.position.y);\n    context.rotate(this.rotation * Math.PI / 180);\n    context.strokeStyle = '#ffffff';\n    context.fillStyle = '#000000';\n    context.lineWidth = 2;\n    context.beginPath();\n    context.moveTo(0, -this.radius);\n    context.lineTo(this.radius / 2, this.radius / 2);\n    context.lineTo(-this.radius / 2, this.radius / 2);\n    context.closePath();\n    context.fill();\n    context.stroke();\n    context.restore();\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}