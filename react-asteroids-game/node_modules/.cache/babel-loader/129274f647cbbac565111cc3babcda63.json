{"ast":null,"code":"var _jsxFileName = \"/Users/jlacomba/Game-Asteroids/react-asteroids-game/src/components/Game.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport Player from './Player';\nimport { handleInput } from '../core/inputController';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Game = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const bulletsRef = useRef([]);\n  const canShootRef = useRef(true);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    const player = new Player({\n      position: {\n        x: canvas.width / 2,\n        y: canvas.height / 2\n      }\n    });\n    let animationFrameId;\n    const gameLoop = () => {\n      const keys = handleInput();\n\n      // Handle shooting\n      if (keys[' '] && canShootRef.current) {\n        bulletsRef.current.push(player.shoot());\n        canShootRef.current = false;\n      }\n      if (!keys[' ']) {\n        canShootRef.current = true;\n      }\n      context.fillStyle = 'black';\n      context.fillRect(0, 0, canvas.width, canvas.height);\n      player.update(keys, canvas.width, canvas.height);\n      player.draw(context);\n\n      // Update and draw bullets\n      bulletsRef.current.forEach(bullet => bullet.update(canvas.width, canvas.height));\n      bulletsRef.current.forEach(bullet => bullet.draw(context));\n\n      // Remove off-screen bullets\n      bulletsRef.current = bulletsRef.current.filter(bullet => !bullet.delete);\n      animationFrameId = window.requestAnimationFrame(gameLoop);\n    };\n    gameLoop();\n    return () => {\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 10\n  }, this);\n};\n_s(Game, \"bDxpPRw0zTwSiqB/hhXq9VtRPAo=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useRef","Player","handleInput","jsxDEV","_jsxDEV","Game","_s","canvasRef","bulletsRef","canShootRef","canvas","current","context","getContext","width","window","innerWidth","height","innerHeight","player","position","x","y","animationFrameId","gameLoop","keys","push","shoot","fillStyle","fillRect","update","draw","forEach","bullet","filter","delete","requestAnimationFrame","cancelAnimationFrame","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jlacomba/Game-Asteroids/react-asteroids-game/src/components/Game.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport Player from './Player';\nimport { handleInput } from '../core/inputController';\n\nconst Game = () => {\n  const canvasRef = useRef(null);\n  const bulletsRef = useRef([]);\n  const canShootRef = useRef(true);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n\n    const player = new Player({\n      position: { x: canvas.width / 2, y: canvas.height / 2 },\n    });\n\n    let animationFrameId;\n\n    const gameLoop = () => {\n      const keys = handleInput();\n\n      // Handle shooting\n      if (keys[' '] && canShootRef.current) {\n        bulletsRef.current.push(player.shoot());\n        canShootRef.current = false;\n      }\n      if (!keys[' ']) {\n        canShootRef.current = true;\n      }\n\n      context.fillStyle = 'black';\n      context.fillRect(0, 0, canvas.width, canvas.height);\n\n      player.update(keys, canvas.width, canvas.height);\n      player.draw(context);\n\n      // Update and draw bullets\n      bulletsRef.current.forEach(bullet => bullet.update(canvas.width, canvas.height));\n      bulletsRef.current.forEach(bullet => bullet.draw(context));\n\n      // Remove off-screen bullets\n      bulletsRef.current = bulletsRef.current.filter(bullet => !bullet.delete);\n\n      animationFrameId = window.requestAnimationFrame(gameLoop);\n    };\n\n    gameLoop();\n\n    return () => {\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, []);\n\n  return <canvas ref={canvasRef} />;\n};\n\nexport default Game;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,WAAW,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtD,MAAMC,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAMC,SAAS,GAAGP,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMQ,UAAU,GAAGR,MAAM,CAAC,EAAE,CAAC;EAC7B,MAAMS,WAAW,GAAGT,MAAM,CAAC,IAAI,CAAC;EAEhCD,SAAS,CAAC,MAAM;IACd,MAAMW,MAAM,GAAGH,SAAS,CAACI,OAAO;IAChC,MAAMC,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IACvCH,MAAM,CAACI,KAAK,GAAGC,MAAM,CAACC,UAAU;IAChCN,MAAM,CAACO,MAAM,GAAGF,MAAM,CAACG,WAAW;IAElC,MAAMC,MAAM,GAAG,IAAIlB,MAAM,CAAC;MACxBmB,QAAQ,EAAE;QAAEC,CAAC,EAAEX,MAAM,CAACI,KAAK,GAAG,CAAC;QAAEQ,CAAC,EAAEZ,MAAM,CAACO,MAAM,GAAG;MAAE;IACxD,CAAC,CAAC;IAEF,IAAIM,gBAAgB;IAEpB,MAAMC,QAAQ,GAAGA,CAAA,KAAM;MACrB,MAAMC,IAAI,GAAGvB,WAAW,CAAC,CAAC;;MAE1B;MACA,IAAIuB,IAAI,CAAC,GAAG,CAAC,IAAIhB,WAAW,CAACE,OAAO,EAAE;QACpCH,UAAU,CAACG,OAAO,CAACe,IAAI,CAACP,MAAM,CAACQ,KAAK,CAAC,CAAC,CAAC;QACvClB,WAAW,CAACE,OAAO,GAAG,KAAK;MAC7B;MACA,IAAI,CAACc,IAAI,CAAC,GAAG,CAAC,EAAE;QACdhB,WAAW,CAACE,OAAO,GAAG,IAAI;MAC5B;MAEAC,OAAO,CAACgB,SAAS,GAAG,OAAO;MAC3BhB,OAAO,CAACiB,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEnB,MAAM,CAACI,KAAK,EAAEJ,MAAM,CAACO,MAAM,CAAC;MAEnDE,MAAM,CAACW,MAAM,CAACL,IAAI,EAAEf,MAAM,CAACI,KAAK,EAAEJ,MAAM,CAACO,MAAM,CAAC;MAChDE,MAAM,CAACY,IAAI,CAACnB,OAAO,CAAC;;MAEpB;MACAJ,UAAU,CAACG,OAAO,CAACqB,OAAO,CAACC,MAAM,IAAIA,MAAM,CAACH,MAAM,CAACpB,MAAM,CAACI,KAAK,EAAEJ,MAAM,CAACO,MAAM,CAAC,CAAC;MAChFT,UAAU,CAACG,OAAO,CAACqB,OAAO,CAACC,MAAM,IAAIA,MAAM,CAACF,IAAI,CAACnB,OAAO,CAAC,CAAC;;MAE1D;MACAJ,UAAU,CAACG,OAAO,GAAGH,UAAU,CAACG,OAAO,CAACuB,MAAM,CAACD,MAAM,IAAI,CAACA,MAAM,CAACE,MAAM,CAAC;MAExEZ,gBAAgB,GAAGR,MAAM,CAACqB,qBAAqB,CAACZ,QAAQ,CAAC;IAC3D,CAAC;IAEDA,QAAQ,CAAC,CAAC;IAEV,OAAO,MAAM;MACXT,MAAM,CAACsB,oBAAoB,CAACd,gBAAgB,CAAC;IAC/C,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAOnB,OAAA;IAAQkC,GAAG,EAAE/B;EAAU;IAAAgC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnC,CAAC;AAACpC,EAAA,CArDID,IAAI;AAAAsC,EAAA,GAAJtC,IAAI;AAuDV,eAAeA,IAAI;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}