{"ast":null,"code":"import React, { useEffect, useRef } from 'react';\nimport { useGameLoop } from '../hooks/useGameLoop';\nimport { handleInput } from '../core/inputController';\nimport Bullet from './Bullet';\nexport default class Player {\n  constructor(args) {\n    this.position = args.position;\n    this.velocity = {\n      x: 0,\n      y: 0\n    };\n    this.rotation = 0;\n    this.rotationSpeed = 6;\n    this.speed = 0.15;\n    this.inertia = 0.99;\n    this.radius = 20;\n  }\n  destroy() {\n    this.delete = true;\n  }\n  shoot() {\n    const bulletPosition = {\n      x: this.position.x - Math.sin(-this.rotation * Math.PI / 180) * this.radius,\n      y: this.position.y - Math.cos(-this.rotation * Math.PI / 180) * this.radius\n    };\n    return new Bullet({\n      position: bulletPosition,\n      rotation: this.rotation\n    });\n  }\n  rotate(dir) {\n    if (dir === 'LEFT') {\n      this.rotation -= this.rotationSpeed;\n    }\n    if (dir === 'RIGHT') {\n      this.rotation += this.rotationSpeed;\n    }\n  }\n  accelerate() {\n    this.velocity.x -= Math.sin(-this.rotation * Math.PI / 180) * this.speed;\n    this.velocity.y -= Math.cos(-this.rotation * Math.PI / 180) * this.speed;\n  }\n  decelerate() {\n    this.velocity.x += Math.sin(-this.rotation * Math.PI / 180) * (this.speed / 2);\n    this.velocity.y += Math.cos(-this.rotation * Math.PI / 180) * (this.speed / 2);\n  }\n  update(keys, width, height) {\n    if (keys.a) {\n      this.rotate('LEFT');\n    }\n    if (keys.d) {\n      this.rotate('RIGHT');\n    }\n    if (keys.w) {\n      this.accelerate();\n    }\n    if (keys.s) {\n      this.decelerate();\n    }\n\n    // Apply inertia\n    this.velocity.x *= this.inertia;\n    this.velocity.y *= this.inertia;\n\n    // Update position\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n\n    // Screen wrap\n    if (this.position.x > width + this.radius) {\n      this.position.x = -this.radius;\n    } else if (this.position.x < -this.radius) {\n      this.position.x = width + this.radius;\n    }\n    if (this.position.y > height + this.radius) {\n      this.position.y = -this.radius;\n    } else if (this.position.y < -this.radius) {\n      this.position.y = height + this.radius;\n    }\n  }\n  draw(context) {\n    context.save();\n    context.translate(this.position.x, this.position.y);\n    context.rotate(this.rotation * Math.PI / 180);\n    context.strokeStyle = '#ffffff';\n    context.fillStyle = '#000000';\n    context.lineWidth = 2;\n    context.beginPath();\n    context.moveTo(0, -this.radius);\n    context.lineTo(this.radius / 2, this.radius / 2);\n    context.lineTo(-this.radius / 2, this.radius / 2);\n    context.closePath();\n    context.fill();\n    context.stroke();\n    context.restore();\n  }\n}","map":{"version":3,"names":["React","useEffect","useRef","useGameLoop","handleInput","Bullet","Player","constructor","args","position","velocity","x","y","rotation","rotationSpeed","speed","inertia","radius","destroy","delete","shoot","bulletPosition","Math","sin","PI","cos","rotate","dir","accelerate","decelerate","update","keys","width","height","a","d","w","s","draw","context","save","translate","strokeStyle","fillStyle","lineWidth","beginPath","moveTo","lineTo","closePath","fill","stroke","restore"],"sources":["/Users/jlacomba/Game-Asteroids/react-asteroids-game/src/components/Player.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { useGameLoop } from '../hooks/useGameLoop';\nimport { handleInput } from '../core/inputController';\nimport Bullet from './Bullet';\n\nexport default class Player {\n  constructor(args) {\n    this.position = args.position;\n    this.velocity = { x: 0, y: 0 };\n    this.rotation = 0;\n    this.rotationSpeed = 6;\n    this.speed = 0.15;\n    this.inertia = 0.99;\n    this.radius = 20;\n  }\n\n  destroy() {\n    this.delete = true;\n  }\n\n  shoot() {\n    const bulletPosition = {\n      x: this.position.x - Math.sin(-this.rotation * Math.PI / 180) * this.radius,\n      y: this.position.y - Math.cos(-this.rotation * Math.PI / 180) * this.radius,\n    };\n    return new Bullet({ position: bulletPosition, rotation: this.rotation });\n  }\n\n  rotate(dir) {\n    if (dir === 'LEFT') {\n      this.rotation -= this.rotationSpeed;\n    }\n    if (dir === 'RIGHT') {\n      this.rotation += this.rotationSpeed;\n    }\n  }\n\n  accelerate() {\n    this.velocity.x -= Math.sin(-this.rotation * Math.PI / 180) * this.speed;\n    this.velocity.y -= Math.cos(-this.rotation * Math.PI / 180) * this.speed;\n  }\n\n  decelerate() {\n    this.velocity.x += Math.sin(-this.rotation * Math.PI / 180) * (this.speed / 2);\n    this.velocity.y += Math.cos(-this.rotation * Math.PI / 180) * (this.speed / 2);\n  }\n\n  update(keys, width, height) {\n    if (keys.a) {\n      this.rotate('LEFT');\n    }\n    if (keys.d) {\n      this.rotate('RIGHT');\n    }\n    if (keys.w) {\n      this.accelerate();\n    }\n    if (keys.s) {\n      this.decelerate();\n    }\n\n    // Apply inertia\n    this.velocity.x *= this.inertia;\n    this.velocity.y *= this.inertia;\n\n    // Update position\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n\n    // Screen wrap\n    if (this.position.x > width + this.radius) {\n      this.position.x = -this.radius;\n    } else if (this.position.x < -this.radius) {\n      this.position.x = width + this.radius;\n    }\n    if (this.position.y > height + this.radius) {\n      this.position.y = -this.radius;\n    } else if (this.position.y < -this.radius) {\n      this.position.y = height + this.radius;\n    }\n  }\n\n  draw(context) {\n    context.save();\n    context.translate(this.position.x, this.position.y);\n    context.rotate(this.rotation * Math.PI / 180);\n    context.strokeStyle = '#ffffff';\n    context.fillStyle = '#000000';\n    context.lineWidth = 2;\n    context.beginPath();\n    context.moveTo(0, -this.radius);\n    context.lineTo(this.radius / 2, this.radius / 2);\n    context.lineTo(-this.radius / 2, this.radius / 2);\n    context.closePath();\n    context.fill();\n    context.stroke();\n    context.restore();\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}