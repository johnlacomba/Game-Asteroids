{"ast":null,"code":"var _jsxFileName = \"/Users/jlacomba/Game-Asteroids/react-asteroids-game/src/components/Game.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport Player from './Player';\nimport Asteroid from './Asteroid';\nimport Debris from './Debris';\nimport UFO from './UFO';\nimport { handleInput } from '../core/inputController';\nimport { checkPolygonCollision, checkCirclePolygonCollision } from '../core/collision';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Game = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const bulletsRef = useRef([]);\n  const ufoBulletsRef = useRef([]);\n  const asteroidsRef = useRef([]);\n  const debrisRef = useRef([]);\n  const ufoRef = useRef(null);\n  const playerRef = useRef(null);\n  const starsRef = useRef([]); // Ref to store star positions\n  const shootCooldownRef = useRef(0);\n  const waveCountRef = useRef(30);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [resetKey, setResetKey] = useState(0);\n  const gameOverRef = useRef(false);\n  const scoreRef = useRef(0);\n  const ufoSpawnTimerRef = useRef(0);\n  const UFO_SPAWN_TIME = 30 * 60;\n  const SHOOT_COOLDOWN = 15;\n  const WORLD_WIDTH = 3000;\n  const WORLD_HEIGHT = 2000;\n  useEffect(() => {\n    const handleRestart = e => {\n      if (e.key === 'Enter') {\n        // Clear all game object arrays\n        asteroidsRef.current = [];\n        bulletsRef.current = [];\n        ufoBulletsRef.current = [];\n        debrisRef.current = [];\n        ufoRef.current = null;\n\n        // Reset game state refs\n        scoreRef.current = 0;\n        gameOverRef.current = false;\n        waveCountRef.current = 30;\n        ufoSpawnTimerRef.current = 0;\n        shootCooldownRef.current = 0;\n\n        // Trigger a full re-initialization of the game\n        setIsGameOver(false);\n        setResetKey(prev => prev + 1);\n      }\n    };\n    if (isGameOver) {\n      window.addEventListener('keydown', handleRestart);\n    }\n    return () => {\n      window.removeEventListener('keydown', handleRestart);\n    };\n  }, [isGameOver]);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    canvas.width = 1024;\n    canvas.height = 768;\n\n    // Generate background stars if they don't exist yet\n    if (starsRef.current.length === 0) {\n      const starCount = 400;\n      for (let i = 0; i < starCount; i++) {\n        starsRef.current.push({\n          x: Math.random() * WORLD_WIDTH,\n          y: Math.random() * WORLD_HEIGHT,\n          radius: Math.random() * 1.2\n        });\n      }\n    }\n\n    // Initialize Player\n    const player = new Player({\n      position: {\n        x: WORLD_WIDTH / 2,\n        y: WORLD_HEIGHT / 2\n      }\n    });\n    playerRef.current = player;\n    const spawnUFO = () => {\n      const side = Math.floor(Math.random() * 4);\n      let position, velocity;\n      const speed = 1.5;\n      switch (side) {\n        case 0:\n          // Top\n          position = {\n            x: Math.random() * WORLD_WIDTH,\n            y: -50\n          };\n          velocity = {\n            x: Math.random() * 2 - 1,\n            y: speed\n          };\n          break;\n        case 1:\n          // Right\n          position = {\n            x: WORLD_WIDTH + 50,\n            y: Math.random() * WORLD_HEIGHT\n          };\n          velocity = {\n            x: -speed,\n            y: Math.random() * 2 - 1\n          };\n          break;\n        case 2:\n          // Bottom\n          position = {\n            x: Math.random() * WORLD_WIDTH,\n            y: WORLD_HEIGHT + 50\n          };\n          velocity = {\n            x: Math.random() * 2 - 1,\n            y: -speed\n          };\n          break;\n        case 3: // Left\n        default:\n          position = {\n            x: -50,\n            y: Math.random() * WORLD_HEIGHT\n          };\n          velocity = {\n            x: speed,\n            y: Math.random() * 2 - 1\n          };\n          break;\n      }\n      ufoRef.current = new UFO({\n        position,\n        velocity\n      });\n    };\n    const spawnAsteroids = count => {\n      const safeRadius = 200;\n      for (let i = 0; i < count; i++) {\n        let asteroidPosition;\n        let isSafe = false;\n        while (!isSafe) {\n          asteroidPosition = {\n            x: Math.random() * WORLD_WIDTH,\n            y: Math.random() * WORLD_HEIGHT\n          };\n          const dx = asteroidPosition.x - player.position.x;\n          const dy = asteroidPosition.y - player.position.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          if (distance > safeRadius) {\n            isSafe = true;\n          }\n        }\n        asteroidsRef.current.push(new Asteroid({\n          position: asteroidPosition\n        }));\n      }\n    };\n\n    // Initial spawn\n    spawnAsteroids(waveCountRef.current);\n    let animationFrameId;\n    const gameLoop = () => {\n      const currentPlayer = playerRef.current;\n\n      // Only handle player input if the game is not over\n      if (!gameOverRef.current) {\n        if (shootCooldownRef.current > 0) {\n          shootCooldownRef.current--;\n        }\n        const keys = handleInput();\n        // Handle shooting\n        if (keys[' '] && shootCooldownRef.current <= 0) {\n          bulletsRef.current.push(currentPlayer.shoot());\n          shootCooldownRef.current = SHOOT_COOLDOWN;\n        }\n        // Update player\n        currentPlayer.update(keys, WORLD_WIDTH, WORLD_HEIGHT);\n      }\n\n      // UFO Spawn Logic\n      if (!gameOverRef.current) {\n        ufoSpawnTimerRef.current++;\n        if (!ufoRef.current && ufoSpawnTimerRef.current > UFO_SPAWN_TIME) {\n          spawnUFO();\n          ufoSpawnTimerRef.current = 0;\n        }\n      }\n      context.fillStyle = 'black';\n      context.fillRect(0, 0, canvas.width, canvas.height);\n\n      // --- Camera and World Rendering ---\n      context.save();\n\n      // Center camera on player\n      const cameraX = currentPlayer.position.x - canvas.width / 2;\n      const cameraY = currentPlayer.position.y - canvas.height / 2;\n      context.translate(-cameraX, -cameraY);\n\n      // Draw background stars\n      context.fillStyle = 'white';\n      starsRef.current.forEach(star => {\n        context.beginPath();\n        context.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);\n        context.fill();\n      });\n\n      // Draw world border\n      context.strokeStyle = 'white';\n      context.lineWidth = 4;\n      context.strokeRect(0, 0, WORLD_WIDTH, WORLD_HEIGHT);\n\n      // Draw player if it has not been destroyed\n      if (!currentPlayer.delete) {\n        currentPlayer.draw(context);\n      }\n\n      // Update and draw UFO\n      if (ufoRef.current) {\n        const newUfoBullets = ufoRef.current.update(WORLD_WIDTH, WORLD_HEIGHT, currentPlayer.position);\n        ufoBulletsRef.current.push(...newUfoBullets);\n        ufoRef.current.draw(context);\n        if (ufoRef.current.delete) {\n          ufoRef.current = null;\n        }\n      }\n\n      // Update and draw asteroids, bullets, and debris\n      asteroidsRef.current.forEach(asteroid => asteroid.update(WORLD_WIDTH, WORLD_HEIGHT));\n      asteroidsRef.current.forEach(asteroid => asteroid.draw(context));\n      bulletsRef.current.forEach(bullet => bullet.update(WORLD_WIDTH, WORLD_HEIGHT));\n      bulletsRef.current.forEach(bullet => bullet.draw(context));\n      ufoBulletsRef.current.forEach(bullet => bullet.update(WORLD_WIDTH, WORLD_HEIGHT));\n      ufoBulletsRef.current.forEach(bullet => bullet.draw(context));\n      debrisRef.current.forEach(d => d.update());\n      debrisRef.current.forEach(d => d.draw(context));\n\n      // --- End Camera ---\n      context.restore();\n\n      // --- UI Rendering (fixed on screen) ---\n      // Draw Score\n      context.fillStyle = 'white';\n      context.font = '24px Arial';\n      context.textAlign = 'left';\n      context.textBaseline = 'top';\n      context.fillText(`Score: ${scoreRef.current}`, 20, 20);\n\n      // Collision Detection: Bullets with Asteroids\n      bulletsRef.current.forEach(bullet => {\n        asteroidsRef.current.forEach(asteroid => {\n          if (checkCirclePolygonCollision(bullet, asteroid.getPolygon())) {\n            bullet.delete = true;\n            if (asteroid.hitPoints - 1 <= 0) {\n              scoreRef.current += 100;\n            }\n            asteroid.hit();\n          }\n        });\n      });\n\n      // Collision Detection: Bullets with UFO\n      if (ufoRef.current) {\n        const ufoPolygon = ufoRef.current.getPolygon();\n        bulletsRef.current.forEach(bullet => {\n          if (!bullet.delete && checkCirclePolygonCollision(bullet, ufoPolygon)) {\n            bullet.delete = true;\n            ufoRef.current.destroy();\n            scoreRef.current += 500; // UFO is worth more points\n          }\n        });\n      }\n\n      // Collision Detection: UFO Bullets with Player\n      if (!gameOverRef.current) {\n        const playerPolygon = currentPlayer.getPolygon();\n        ufoBulletsRef.current.forEach(bullet => {\n          if (checkCirclePolygonCollision(bullet, playerPolygon)) {\n            bullet.delete = true;\n            debrisRef.current = debrisRef.current.concat(currentPlayer.destroy());\n            gameOverRef.current = true;\n            setIsGameOver(true);\n          }\n        });\n      }\n\n      // Collision Detection: Player with Asteroids (only if game not over)\n      if (!gameOverRef.current) {\n        const playerPolygon = currentPlayer.getPolygon();\n        asteroidsRef.current.forEach(asteroid => {\n          if (checkPolygonCollision(playerPolygon, asteroid.getPolygon())) {\n            debrisRef.current = debrisRef.current.concat(currentPlayer.destroy());\n            gameOverRef.current = true;\n            setIsGameOver(true);\n          }\n        });\n      }\n\n      // Collision Detection: Player with UFO\n      if (!gameOverRef.current && ufoRef.current) {\n        const playerPolygon = currentPlayer.getPolygon();\n        const ufoPolygon = ufoRef.current.getPolygon();\n        if (checkPolygonCollision(playerPolygon, ufoPolygon)) {\n          debrisRef.current = debrisRef.current.concat(currentPlayer.destroy());\n          gameOverRef.current = true;\n          setIsGameOver(true);\n          ufoRef.current.destroy(); // Also destroy the UFO\n        }\n      }\n\n      // Handle asteroid splitting\n      const newAsteroids = [];\n      asteroidsRef.current.forEach(asteroid => {\n        // Check if a large asteroid is destroyed\n        if (asteroid.delete && asteroid.radius >= 50) {\n          // Split into two smaller asteroids\n          newAsteroids.push(new Asteroid({\n            position: {\n              ...asteroid.position\n            },\n            size: asteroid.radius / 2\n          }));\n          newAsteroids.push(new Asteroid({\n            position: {\n              ...asteroid.position\n            },\n            size: asteroid.radius / 2\n          }));\n        }\n      });\n\n      // Remove deleted items and add new ones\n      bulletsRef.current = bulletsRef.current.filter(b => !b.delete);\n      ufoBulletsRef.current = ufoBulletsRef.current.filter(b => !b.delete);\n      debrisRef.current = debrisRef.current.filter(d => !d.delete);\n      asteroidsRef.current = asteroidsRef.current.filter(a => !a.delete).concat(newAsteroids);\n\n      // Check for next wave (only if game not over)\n      if (!gameOverRef.current && asteroidsRef.current.length === 0) {\n        waveCountRef.current++;\n        spawnAsteroids(waveCountRef.current);\n      }\n      animationFrameId = window.requestAnimationFrame(gameLoop);\n    };\n    gameLoop();\n    return () => {\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, [resetKey]); // Add resetKey to dependency array\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isGameOver && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        color: 'white',\n        fontSize: '48px',\n        textAlign: 'center'\n      },\n      children: [\"GAME OVER\", /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '24px',\n          marginTop: '20px'\n        },\n        children: \"Press Enter to Restart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Game, \"0lHNJHTV7xRkmwAEhH54bQfAtZY=\");\n_c = Game;\nexport default Game;\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Player","Asteroid","Debris","UFO","handleInput","checkPolygonCollision","checkCirclePolygonCollision","jsxDEV","_jsxDEV","Fragment","_Fragment","Game","_s","canvasRef","bulletsRef","ufoBulletsRef","asteroidsRef","debrisRef","ufoRef","playerRef","starsRef","shootCooldownRef","waveCountRef","isGameOver","setIsGameOver","resetKey","setResetKey","gameOverRef","scoreRef","ufoSpawnTimerRef","UFO_SPAWN_TIME","SHOOT_COOLDOWN","WORLD_WIDTH","WORLD_HEIGHT","handleRestart","e","key","current","prev","window","addEventListener","removeEventListener","canvas","context","getContext","width","height","length","starCount","i","push","x","Math","random","y","radius","player","position","spawnUFO","side","floor","velocity","speed","spawnAsteroids","count","safeRadius","asteroidPosition","isSafe","dx","dy","distance","sqrt","animationFrameId","gameLoop","currentPlayer","keys","shoot","update","fillStyle","fillRect","save","cameraX","cameraY","translate","forEach","star","beginPath","arc","PI","fill","strokeStyle","lineWidth","strokeRect","delete","draw","newUfoBullets","asteroid","bullet","d","restore","font","textAlign","textBaseline","fillText","getPolygon","hitPoints","hit","ufoPolygon","destroy","playerPolygon","concat","newAsteroids","size","filter","b","a","requestAnimationFrame","cancelAnimationFrame","children","style","top","left","transform","color","fontSize","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","$RefreshReg$"],"sources":["/Users/jlacomba/Game-Asteroids/react-asteroids-game/src/components/Game.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport Player from './Player';\nimport Asteroid from './Asteroid';\nimport Debris from './Debris';\nimport UFO from './UFO';\nimport { handleInput } from '../core/inputController';\nimport { checkPolygonCollision, checkCirclePolygonCollision } from '../core/collision';\n\nconst Game = () => {\n  const canvasRef = useRef(null);\n  const bulletsRef = useRef([]);\n  const ufoBulletsRef = useRef([]);\n  const asteroidsRef = useRef([]);\n  const debrisRef = useRef([]);\n  const ufoRef = useRef(null);\n  const playerRef = useRef(null);\n  const starsRef = useRef([]); // Ref to store star positions\n  const shootCooldownRef = useRef(0);\n  const waveCountRef = useRef(30);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [resetKey, setResetKey] = useState(0);\n  const gameOverRef = useRef(false);\n  const scoreRef = useRef(0);\n  const ufoSpawnTimerRef = useRef(0);\n  const UFO_SPAWN_TIME = 30 * 60;\n  const SHOOT_COOLDOWN = 15;\n  const WORLD_WIDTH = 3000;\n  const WORLD_HEIGHT = 2000;\n\n  useEffect(() => {\n    const handleRestart = (e) => {\n      if (e.key === 'Enter') {\n        // Clear all game object arrays\n        asteroidsRef.current = [];\n        bulletsRef.current = [];\n        ufoBulletsRef.current = [];\n        debrisRef.current = [];\n        ufoRef.current = null;\n\n        // Reset game state refs\n        scoreRef.current = 0;\n        gameOverRef.current = false;\n        waveCountRef.current = 30;\n        ufoSpawnTimerRef.current = 0;\n        shootCooldownRef.current = 0;\n\n        // Trigger a full re-initialization of the game\n        setIsGameOver(false);\n        setResetKey(prev => prev + 1);\n      }\n    };\n\n    if (isGameOver) {\n      window.addEventListener('keydown', handleRestart);\n    }\n\n    return () => {\n      window.removeEventListener('keydown', handleRestart);\n    };\n  }, [isGameOver]);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    canvas.width = 1024;\n    canvas.height = 768;\n\n    // Generate background stars if they don't exist yet\n    if (starsRef.current.length === 0) {\n      const starCount = 400;\n      for (let i = 0; i < starCount; i++) {\n        starsRef.current.push({\n          x: Math.random() * WORLD_WIDTH,\n          y: Math.random() * WORLD_HEIGHT,\n          radius: Math.random() * 1.2,\n        });\n      }\n    }\n\n    // Initialize Player\n    const player = new Player({\n      position: { x: WORLD_WIDTH / 2, y: WORLD_HEIGHT / 2 },\n    });\n    playerRef.current = player;\n\n    const spawnUFO = () => {\n      const side = Math.floor(Math.random() * 4);\n      let position, velocity;\n      const speed = 1.5;\n\n      switch (side) {\n        case 0: // Top\n          position = { x: Math.random() * WORLD_WIDTH, y: -50 };\n          velocity = { x: Math.random() * 2 - 1, y: speed };\n          break;\n        case 1: // Right\n          position = { x: WORLD_WIDTH + 50, y: Math.random() * WORLD_HEIGHT };\n          velocity = { x: -speed, y: Math.random() * 2 - 1 };\n          break;\n        case 2: // Bottom\n          position = { x: Math.random() * WORLD_WIDTH, y: WORLD_HEIGHT + 50 };\n          velocity = { x: Math.random() * 2 - 1, y: -speed };\n          break;\n        case 3: // Left\n        default:\n          position = { x: -50, y: Math.random() * WORLD_HEIGHT };\n          velocity = { x: speed, y: Math.random() * 2 - 1 };\n          break;\n      }\n      ufoRef.current = new UFO({ position, velocity });\n    };\n\n    const spawnAsteroids = (count) => {\n      const safeRadius = 200;\n      for (let i = 0; i < count; i++) {\n        let asteroidPosition;\n        let isSafe = false;\n        while (!isSafe) {\n          asteroidPosition = {\n            x: Math.random() * WORLD_WIDTH,\n            y: Math.random() * WORLD_HEIGHT,\n          };\n  \n          const dx = asteroidPosition.x - player.position.x;\n          const dy = asteroidPosition.y - player.position.y;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n  \n          if (distance > safeRadius) {\n            isSafe = true;\n          }\n        }\n        asteroidsRef.current.push(new Asteroid({\n          position: asteroidPosition\n        }));\n      }\n    };\n\n    // Initial spawn\n    spawnAsteroids(waveCountRef.current);\n\n    let animationFrameId;\n\n    const gameLoop = () => {\n      const currentPlayer = playerRef.current;\n\n      // Only handle player input if the game is not over\n      if (!gameOverRef.current) {\n        if (shootCooldownRef.current > 0) {\n          shootCooldownRef.current--;\n        }\n        const keys = handleInput();\n        // Handle shooting\n        if (keys[' '] && shootCooldownRef.current <= 0) {\n          bulletsRef.current.push(currentPlayer.shoot());\n          shootCooldownRef.current = SHOOT_COOLDOWN;\n        }\n        // Update player\n        currentPlayer.update(keys, WORLD_WIDTH, WORLD_HEIGHT);\n      }\n\n      // UFO Spawn Logic\n      if (!gameOverRef.current) {\n        ufoSpawnTimerRef.current++;\n        if (!ufoRef.current && ufoSpawnTimerRef.current > UFO_SPAWN_TIME) {\n          spawnUFO();\n          ufoSpawnTimerRef.current = 0;\n        }\n      }\n\n      context.fillStyle = 'black';\n      context.fillRect(0, 0, canvas.width, canvas.height);\n\n      // --- Camera and World Rendering ---\n      context.save();\n\n      // Center camera on player\n      const cameraX = currentPlayer.position.x - canvas.width / 2;\n      const cameraY = currentPlayer.position.y - canvas.height / 2;\n      context.translate(-cameraX, -cameraY);\n\n      // Draw background stars\n      context.fillStyle = 'white';\n      starsRef.current.forEach(star => {\n        context.beginPath();\n        context.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);\n        context.fill();\n      });\n\n      // Draw world border\n      context.strokeStyle = 'white';\n      context.lineWidth = 4;\n      context.strokeRect(0, 0, WORLD_WIDTH, WORLD_HEIGHT);\n\n      // Draw player if it has not been destroyed\n      if (!currentPlayer.delete) {\n        currentPlayer.draw(context);\n      }\n\n      // Update and draw UFO\n      if (ufoRef.current) {\n        const newUfoBullets = ufoRef.current.update(WORLD_WIDTH, WORLD_HEIGHT, currentPlayer.position);\n        ufoBulletsRef.current.push(...newUfoBullets);\n\n        ufoRef.current.draw(context);\n        if (ufoRef.current.delete) {\n          ufoRef.current = null;\n        }\n      }\n\n      // Update and draw asteroids, bullets, and debris\n      asteroidsRef.current.forEach(asteroid => asteroid.update(WORLD_WIDTH, WORLD_HEIGHT));\n      asteroidsRef.current.forEach(asteroid => asteroid.draw(context));\n\n      bulletsRef.current.forEach(bullet => bullet.update(WORLD_WIDTH, WORLD_HEIGHT));\n      bulletsRef.current.forEach(bullet => bullet.draw(context));\n\n      ufoBulletsRef.current.forEach(bullet => bullet.update(WORLD_WIDTH, WORLD_HEIGHT));\n      ufoBulletsRef.current.forEach(bullet => bullet.draw(context));\n\n      debrisRef.current.forEach(d => d.update());\n      debrisRef.current.forEach(d => d.draw(context));\n\n      // --- End Camera ---\n      context.restore();\n\n      // --- UI Rendering (fixed on screen) ---\n      // Draw Score\n      context.fillStyle = 'white';\n      context.font = '24px Arial';\n      context.textAlign = 'left';\n      context.textBaseline = 'top';\n      context.fillText(`Score: ${scoreRef.current}`, 20, 20);\n\n      // Collision Detection: Bullets with Asteroids\n      bulletsRef.current.forEach(bullet => {\n        asteroidsRef.current.forEach(asteroid => {\n          if (checkCirclePolygonCollision(bullet, asteroid.getPolygon())) {\n            bullet.delete = true;\n            if (asteroid.hitPoints - 1 <= 0) {\n              scoreRef.current += 100;\n            }\n            asteroid.hit();\n          }\n        });\n      });\n\n      // Collision Detection: Bullets with UFO\n      if (ufoRef.current) {\n        const ufoPolygon = ufoRef.current.getPolygon();\n        bulletsRef.current.forEach(bullet => {\n          if (!bullet.delete && checkCirclePolygonCollision(bullet, ufoPolygon)) {\n            bullet.delete = true;\n            ufoRef.current.destroy();\n            scoreRef.current += 500; // UFO is worth more points\n          }\n        });\n      }\n\n      // Collision Detection: UFO Bullets with Player\n      if (!gameOverRef.current) {\n        const playerPolygon = currentPlayer.getPolygon();\n        ufoBulletsRef.current.forEach(bullet => {\n          if (checkCirclePolygonCollision(bullet, playerPolygon)) {\n            bullet.delete = true;\n            debrisRef.current = debrisRef.current.concat(currentPlayer.destroy());\n            gameOverRef.current = true;\n            setIsGameOver(true);\n          }\n        });\n      }\n\n      // Collision Detection: Player with Asteroids (only if game not over)\n      if (!gameOverRef.current) {\n        const playerPolygon = currentPlayer.getPolygon();\n        asteroidsRef.current.forEach(asteroid => {\n          if (checkPolygonCollision(playerPolygon, asteroid.getPolygon())) {\n            debrisRef.current = debrisRef.current.concat(currentPlayer.destroy());\n            gameOverRef.current = true;\n            setIsGameOver(true);\n          }\n        });\n      }\n\n      // Collision Detection: Player with UFO\n      if (!gameOverRef.current && ufoRef.current) {\n        const playerPolygon = currentPlayer.getPolygon();\n        const ufoPolygon = ufoRef.current.getPolygon();\n        if (checkPolygonCollision(playerPolygon, ufoPolygon)) {\n          debrisRef.current = debrisRef.current.concat(currentPlayer.destroy());\n          gameOverRef.current = true;\n          setIsGameOver(true);\n          ufoRef.current.destroy(); // Also destroy the UFO\n        }\n      }\n\n      // Handle asteroid splitting\n      const newAsteroids = [];\n      asteroidsRef.current.forEach(asteroid => {\n        // Check if a large asteroid is destroyed\n        if (asteroid.delete && asteroid.radius >= 50) {\n          // Split into two smaller asteroids\n          newAsteroids.push(new Asteroid({\n            position: { ...asteroid.position },\n            size: asteroid.radius / 2\n          }));\n          newAsteroids.push(new Asteroid({\n            position: { ...asteroid.position },\n            size: asteroid.radius / 2\n          }));\n        }\n      });\n\n      // Remove deleted items and add new ones\n      bulletsRef.current = bulletsRef.current.filter(b => !b.delete);\n      ufoBulletsRef.current = ufoBulletsRef.current.filter(b => !b.delete);\n      debrisRef.current = debrisRef.current.filter(d => !d.delete);\n      asteroidsRef.current = asteroidsRef.current.filter(a => !a.delete).concat(newAsteroids);\n\n      // Check for next wave (only if game not over)\n      if (!gameOverRef.current && asteroidsRef.current.length === 0) {\n        waveCountRef.current++;\n        spawnAsteroids(waveCountRef.current);\n      }\n\n      animationFrameId = window.requestAnimationFrame(gameLoop);\n    };\n\n    gameLoop();\n\n    return () => {\n      window.cancelAnimationFrame(animationFrameId);\n    };\n  }, [resetKey]); // Add resetKey to dependency array\n\n  return (\n    <>\n      {isGameOver && (\n        <div style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', color: 'white', fontSize: '48px', textAlign: 'center' }}>\n          GAME OVER\n          <p style={{ fontSize: '24px', marginTop: '20px' }}>Press Enter to Restart</p>\n        </div>\n      )}\n      <canvas ref={canvasRef} />\n    </>\n  );\n};\n\nexport default Game;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}